import React, { useEffect, useRef } from "react";
import nardo_0001 from "../assets/nardo-explode-frames/0001.png";
import nardo_0002 from "../assets/nardo-explode-frames/0002.png";
import nardo_0003 from "../assets/nardo-explode-frames/0003.png";
import nardo_0004 from "../assets/nardo-explode-frames/0004.png";
import nardo_0005 from "../assets/nardo-explode-frames/0005.png";
import nardo_0006 from "../assets/nardo-explode-frames/0006.png";
import nardo_0007 from "../assets/nardo-explode-frames/0007.png";
import nardo_0008 from "../assets/nardo-explode-frames/0008.png";
import nardo_0009 from "../assets/nardo-explode-frames/0009.png";
import nardo_0010 from "../assets/nardo-explode-frames/0010.png";
import nardo_0011 from "../assets/nardo-explode-frames/0011.png";
import nardo_0012 from "../assets/nardo-explode-frames/0012.png";
import nardo_0013 from "../assets/nardo-explode-frames/0013.png";
import nardo_0014 from "../assets/nardo-explode-frames/0014.png";
import nardo_0015 from "../assets/nardo-explode-frames/0015.png";
import nardo_0016 from "../assets/nardo-explode-frames/0016.png";
import nardo_0017 from "../assets/nardo-explode-frames/0017.png";
import nardo_0018 from "../assets/nardo-explode-frames/0018.png";
import nardo_0019 from "../assets/nardo-explode-frames/0019.png";
import nardo_0020 from "../assets/nardo-explode-frames/0020.png";
import nardo_0021 from "../assets/nardo-explode-frames/0021.png";
import nardo_0022 from "../assets/nardo-explode-frames/0022.png";
import nardo_0023 from "../assets/nardo-explode-frames/0023.png";
import nardo_0024 from "../assets/nardo-explode-frames/0024.png";
import nardo_0025 from "../assets/nardo-explode-frames/0025.png";
import nardo_0026 from "../assets/nardo-explode-frames/0026.png";
import nardo_0027 from "../assets/nardo-explode-frames/0027.png";
import nardo_0028 from "../assets/nardo-explode-frames/0028.png";
import nardo_0029 from "../assets/nardo-explode-frames/0029.png";
import nardo_0030 from "../assets/nardo-explode-frames/0030.png";
import nardo_0031 from "../assets/nardo-explode-frames/0031.png";
import nardo_0032 from "../assets/nardo-explode-frames/0032.png";
import nardo_0033 from "../assets/nardo-explode-frames/0033.png";
import nardo_0034 from "../assets/nardo-explode-frames/0034.png";
import nardo_0035 from "../assets/nardo-explode-frames/0035.png";
import nardo_0036 from "../assets/nardo-explode-frames/0036.png";
import nardo_0037 from "../assets/nardo-explode-frames/0037.png";
import nardo_0038 from "../assets/nardo-explode-frames/0038.png";
import nardo_0039 from "../assets/nardo-explode-frames/0039.png";
import nardo_0040 from "../assets/nardo-explode-frames/0040.png";
import nardo_0041 from "../assets/nardo-explode-frames/0041.png";
import nardo_0042 from "../assets/nardo-explode-frames/0042.png";
import nardo_0043 from "../assets/nardo-explode-frames/0043.png";
import nardo_0044 from "../assets/nardo-explode-frames/0044.png";
import nardo_0045 from "../assets/nardo-explode-frames/0045.png";
import nardo_0046 from "../assets/nardo-explode-frames/0046.png";
import nardo_0047 from "../assets/nardo-explode-frames/0047.png";
import nardo_0048 from "../assets/nardo-explode-frames/0048.png";
import nardo_0049 from "../assets/nardo-explode-frames/0049.png";
import nardo_0050 from "../assets/nardo-explode-frames/0050.png";
import nardo_0051 from "../assets/nardo-explode-frames/0051.png";
import nardo_0052 from "../assets/nardo-explode-frames/0052.png";
import nardo_0053 from "../assets/nardo-explode-frames/0053.png";
import nardo_0054 from "../assets/nardo-explode-frames/0054.png";
import nardo_0055 from "../assets/nardo-explode-frames/0055.png";
import nardo_0056 from "../assets/nardo-explode-frames/0056.png";
import nardo_0057 from "../assets/nardo-explode-frames/0057.png";
import nardo_0058 from "../assets/nardo-explode-frames/0058.png";
import nardo_0059 from "../assets/nardo-explode-frames/0059.png";
import nardo_0060 from "../assets/nardo-explode-frames/0060.png";
import nardo_0061 from "../assets/nardo-explode-frames/0061.png";
import nardo_0062 from "../assets/nardo-explode-frames/0062.png";
import nardo_0063 from "../assets/nardo-explode-frames/0063.png";
import nardo_0064 from "../assets/nardo-explode-frames/0064.png";
import nardo_0065 from "../assets/nardo-explode-frames/0065.png";
import nardo_0066 from "../assets/nardo-explode-frames/0066.png";
import nardo_0067 from "../assets/nardo-explode-frames/0067.png";
import nardo_0068 from "../assets/nardo-explode-frames/0068.png";
import nardo_0069 from "../assets/nardo-explode-frames/0069.png";
import nardo_0070 from "../assets/nardo-explode-frames/0070.png";
import nardo_0071 from "../assets/nardo-explode-frames/0071.png";
import nardo_0072 from "../assets/nardo-explode-frames/0072.png";
import nardo_0073 from "../assets/nardo-explode-frames/0073.png";
import nardo_0074 from "../assets/nardo-explode-frames/0074.png";
import nardo_0075 from "../assets/nardo-explode-frames/0075.png";
import nardo_0076 from "../assets/nardo-explode-frames/0076.png";
import nardo_0077 from "../assets/nardo-explode-frames/0077.png";
import nardo_0078 from "../assets/nardo-explode-frames/0078.png";
import nardo_0079 from "../assets/nardo-explode-frames/0079.png";
import nardo_0080 from "../assets/nardo-explode-frames/0080.png";
import nardo_0081 from "../assets/nardo-explode-frames/0081.png";
import nardo_0082 from "../assets/nardo-explode-frames/0082.png";
import nardo_0083 from "../assets/nardo-explode-frames/0083.png";
import nardo_0084 from "../assets/nardo-explode-frames/0084.png";
import nardo_0085 from "../assets/nardo-explode-frames/0085.png";
import nardo_0086 from "../assets/nardo-explode-frames/0086.png";
import nardo_0087 from "../assets/nardo-explode-frames/0087.png";
import nardo_0088 from "../assets/nardo-explode-frames/0088.png";
import nardo_0089 from "../assets/nardo-explode-frames/0089.png";
import nardo_0090 from "../assets/nardo-explode-frames/0090.png";
import nardo_0091 from "../assets/nardo-explode-frames/0091.png";
import nardo_0092 from "../assets/nardo-explode-frames/0092.png";
import nardo_0093 from "../assets/nardo-explode-frames/0093.png";
import nardo_0094 from "../assets/nardo-explode-frames/0094.png";
import nardo_0095 from "../assets/nardo-explode-frames/0095.png";
import nardo_0096 from "../assets/nardo-explode-frames/0096.png";
import nardo_0097 from "../assets/nardo-explode-frames/0097.png";
import nardo_0098 from "../assets/nardo-explode-frames/0098.png";
import nardo_0099 from "../assets/nardo-explode-frames/0099.png";
import nardo_0100 from "../assets/nardo-explode-frames/0100.png";
import nardo_0101 from "../assets/nardo-explode-frames/0101.png";
import nardo_0102 from "../assets/nardo-explode-frames/0102.png";
import nardo_0103 from "../assets/nardo-explode-frames/0103.png";
import nardo_0104 from "../assets/nardo-explode-frames/0104.png";
import nardo_0105 from "../assets/nardo-explode-frames/0105.png";
import nardo_0106 from "../assets/nardo-explode-frames/0106.png";
import nardo_0107 from "../assets/nardo-explode-frames/0107.png";
import nardo_0108 from "../assets/nardo-explode-frames/0108.png";
import nardo_0109 from "../assets/nardo-explode-frames/0109.png";
import nardo_0110 from "../assets/nardo-explode-frames/0110.png";
import nardo_0111 from "../assets/nardo-explode-frames/0111.png";
import nardo_0112 from "../assets/nardo-explode-frames/0112.png";
import nardo_0113 from "../assets/nardo-explode-frames/0113.png";
import nardo_0114 from "../assets/nardo-explode-frames/0114.png";
import nardo_0115 from "../assets/nardo-explode-frames/0115.png";
import nardo_0116 from "../assets/nardo-explode-frames/0116.png";
import nardo_0117 from "../assets/nardo-explode-frames/0117.png";
import nardo_0118 from "../assets/nardo-explode-frames/0118.png";
import nardo_0119 from "../assets/nardo-explode-frames/0119.png";
import nardo_0120 from "../assets/nardo-explode-frames/0120.png";
import nardo_0121 from "../assets/nardo-explode-frames/0121.png";
import nardo_0122 from "../assets/nardo-explode-frames/0122.png";
import nardo_0123 from "../assets/nardo-explode-frames/0123.png";
import nardo_0124 from "../assets/nardo-explode-frames/0124.png";
import nardo_0125 from "../assets/nardo-explode-frames/0125.png";
import nardo_0126 from "../assets/nardo-explode-frames/0126.png";
import nardo_0127 from "../assets/nardo-explode-frames/0127.png";
import nardo_0128 from "../assets/nardo-explode-frames/0128.png";
import nardo_0129 from "../assets/nardo-explode-frames/0129.png";
import nardo_0130 from "../assets/nardo-explode-frames/0130.png";
import nardo_0131 from "../assets/nardo-explode-frames/0131.png";
import nardo_0132 from "../assets/nardo-explode-frames/0132.png";
import nardo_0133 from "../assets/nardo-explode-frames/0133.png";
import nardo_0134 from "../assets/nardo-explode-frames/0134.png";
import nardo_0135 from "../assets/nardo-explode-frames/0135.png";
import nardo_0136 from "../assets/nardo-explode-frames/0136.png";
import nardo_0137 from "../assets/nardo-explode-frames/0137.png";
import nardo_0138 from "../assets/nardo-explode-frames/0138.png";
import nardo_0139 from "../assets/nardo-explode-frames/0139.png";
import nardo_0140 from "../assets/nardo-explode-frames/0140.png";
import nardo_0141 from "../assets/nardo-explode-frames/0141.png";
import nardo_0142 from "../assets/nardo-explode-frames/0142.png";
import nardo_0143 from "../assets/nardo-explode-frames/0143.png";
import nardo_0144 from "../assets/nardo-explode-frames/0144.png";
import nardo_0145 from "../assets/nardo-explode-frames/0145.png";
import nardo_0146 from "../assets/nardo-explode-frames/0146.png";
import nardo_0147 from "../assets/nardo-explode-frames/0147.png";
import nardo_0148 from "../assets/nardo-explode-frames/0148.png";
import nardo_0149 from "../assets/nardo-explode-frames/0149.png";
import nardo_0150 from "../assets/nardo-explode-frames/0150.png";
import nardo_0151 from "../assets/nardo-explode-frames/0151.png";
import nardo_0152 from "../assets/nardo-explode-frames/0152.png";
import nardo_0153 from "../assets/nardo-explode-frames/0153.png";
import nardo_0154 from "../assets/nardo-explode-frames/0154.png";
import nardo_0155 from "../assets/nardo-explode-frames/0155.png";
import nardo_0156 from "../assets/nardo-explode-frames/0156.png";
import nardo_0157 from "../assets/nardo-explode-frames/0157.png";
import nardo_0158 from "../assets/nardo-explode-frames/0158.png";
import nardo_0159 from "../assets/nardo-explode-frames/0159.png";
import nardo_0160 from "../assets/nardo-explode-frames/0160.png";
import nardo_0161 from "../assets/nardo-explode-frames/0161.png";
import nardo_0162 from "../assets/nardo-explode-frames/0162.png";
import nardo_0163 from "../assets/nardo-explode-frames/0163.png";
import nardo_0164 from "../assets/nardo-explode-frames/0164.png";
import nardo_0165 from "../assets/nardo-explode-frames/0165.png";
import nardo_0166 from "../assets/nardo-explode-frames/0166.png";
import nardo_0167 from "../assets/nardo-explode-frames/0167.png";
import nardo_0168 from "../assets/nardo-explode-frames/0168.png";
import nardo_0169 from "../assets/nardo-explode-frames/0169.png";
import nardo_0170 from "../assets/nardo-explode-frames/0170.png";
import nardo_0171 from "../assets/nardo-explode-frames/0171.png";
import nardo_0172 from "../assets/nardo-explode-frames/0172.png";
import nardo_0173 from "../assets/nardo-explode-frames/0173.png";
import nardo_0174 from "../assets/nardo-explode-frames/0174.png";
import nardo_0175 from "../assets/nardo-explode-frames/0175.png";
import nardo_0176 from "../assets/nardo-explode-frames/0176.png";
import nardo_0177 from "../assets/nardo-explode-frames/0177.png";
import nardo_0178 from "../assets/nardo-explode-frames/0178.png";
import nardo_0179 from "../assets/nardo-explode-frames/0179.png";
import nardo_0180 from "../assets/nardo-explode-frames/0180.png";
import nardo_0181 from "../assets/nardo-explode-frames/0181.png";
import nardo_0182 from "../assets/nardo-explode-frames/0182.png";
import nardo_0183 from "../assets/nardo-explode-frames/0183.png";
import nardo_0184 from "../assets/nardo-explode-frames/0184.png";
import nardo_0185 from "../assets/nardo-explode-frames/0185.png";


const HeroAnimation: React.FC = () => {
  const html = document.documentElement;
  const canvasRef = useRef<HTMLCanvasElement | null>(null);
  const contextRef = useRef<CanvasRenderingContext2D | null>(null);

  // Set this to the number of frames there are in the video
  const frameCount = 185;

  //array of all nardo frame imports
  const nardoFrames = [
    null, // so index 1 maps to nardo_0001
    nardo_0001,
    nardo_0002,
    nardo_0003,
    nardo_0004,
    nardo_0005,
    nardo_0006,
    nardo_0007,
    nardo_0008,
    nardo_0009,
    nardo_0010,
    nardo_0011,
    nardo_0012,
    nardo_0013,
    nardo_0014,
    nardo_0015,
    nardo_0016,
    nardo_0017,
    nardo_0018,
    nardo_0019,
    nardo_0020,
    nardo_0021,
    nardo_0022,
    nardo_0023,
    nardo_0024,
    nardo_0025,
    nardo_0026,
    nardo_0027,
    nardo_0028,
    nardo_0029,
    nardo_0030,
    nardo_0031,
    nardo_0032,
    nardo_0033,
    nardo_0034,
    nardo_0035,
    nardo_0036,
    nardo_0037,
    nardo_0038,
    nardo_0039,
    nardo_0040,
    nardo_0041,
    nardo_0042,
    nardo_0043,
    nardo_0044,
    nardo_0045,
    nardo_0046,
    nardo_0047,
    nardo_0048,
    nardo_0049,
    nardo_0050,
    nardo_0051,
    nardo_0052,
    nardo_0053,
    nardo_0054,
    nardo_0055,
    nardo_0056,
    nardo_0057,
    nardo_0058,
    nardo_0059,
    nardo_0060,
    nardo_0061,
    nardo_0062,
    nardo_0063,
    nardo_0064,
    nardo_0065,
    nardo_0066,
    nardo_0067,
    nardo_0068,
    nardo_0069,
    nardo_0070,
    nardo_0071,
    nardo_0072,
    nardo_0073,
    nardo_0074,
    nardo_0075,
    nardo_0076,
    nardo_0077,
    nardo_0078,
    nardo_0079,
    nardo_0080,
    nardo_0081,
    nardo_0082,
    nardo_0083,
    nardo_0084,
    nardo_0085,
    nardo_0086,
    nardo_0087,
    nardo_0088,
    nardo_0089,
    nardo_0090,
    nardo_0091,
    nardo_0092,
    nardo_0093,
    nardo_0094,
    nardo_0095,
    nardo_0096,
    nardo_0097,
    nardo_0098,
    nardo_0099,
    nardo_0100,
    nardo_0101,
    nardo_0102,
    nardo_0103,
    nardo_0104,
    nardo_0105,
    nardo_0106,
    nardo_0107,
    nardo_0108,
    nardo_0109,
    nardo_0110,
    nardo_0111,
    nardo_0112,
    nardo_0113,
    nardo_0114,
    nardo_0115,
    nardo_0116,
    nardo_0117,
    nardo_0118,
    nardo_0119,
    nardo_0120,
    nardo_0121,
    nardo_0122,
    nardo_0123,
    nardo_0124,
    nardo_0125,
    nardo_0126,
    nardo_0127,
    nardo_0128,
    nardo_0129,
    nardo_0130,
    nardo_0131,
    nardo_0132,
    nardo_0133,
    nardo_0134,
    nardo_0135,
    nardo_0136,
    nardo_0137,
    nardo_0138,
    nardo_0139,
    nardo_0140,
    nardo_0141,
    nardo_0142,
    nardo_0143,
    nardo_0144,
    nardo_0145,
    nardo_0146,
    nardo_0147,
    nardo_0148,
    nardo_0149,
    nardo_0150,
    nardo_0151,
    nardo_0152,
    nardo_0153,
    nardo_0154,
    nardo_0155,
    nardo_0156,
    nardo_0157,
    nardo_0158,
    nardo_0159,
    nardo_0160,
    nardo_0161,
    nardo_0162,
    nardo_0163,
    nardo_0164,
    nardo_0165,
    nardo_0166,
    nardo_0167,
    nardo_0168,
    nardo_0169,
    nardo_0170,
    nardo_0171,
    nardo_0172,
    nardo_0173,
    nardo_0174,
    nardo_0175,
    nardo_0176,
    nardo_0177,
    nardo_0178,
    nardo_0179,
    nardo_0180,
    nardo_0181,
    nardo_0182,
    nardo_0183,
    nardo_0184,
    nardo_0185
  ];
  

  // Set this to the path where the folder of the frames are
  const currentFrame = (index: number): string => nardoFrames[index];

  const preloadImages = (): void => {
    for (let i = 1; i < frameCount; i++) {
      const img = new Image();
      img.src = currentFrame(i);
    }
  };

  const img = new Image();
  img.src = currentFrame(1);

  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    const context = canvas.getContext("2d");
    if (!context) return;
    contextRef.current = context;

    img.onload = function () {
      canvas.width = img.width;
      canvas.height = img.height;
      context.drawImage(img, 0, 0);
    };

    const updateImage = (index: number): void => {
      img.src = currentFrame(index);
      img.onload = () => {
        if (contextRef.current && canvas) {
          canvas.width = img.width;
          canvas.height = img.height;
          contextRef.current.drawImage(img, 0, 0);
        }
      };
    };

    // this function controls how far the video has played/which frame you are on
    // depending on how much you have scrolled
    // ScrollTop should be the size of the whole page?
    // maxScrollTop is how much of the screen you want to have scrolled past before 
    // the video starts scrolling
    const handleScroll = (): void => {
      const scrollTop = html.scrollTop;
      const maxScrollTop = window.innerHeight * 0.8;
      const scrollFraction = scrollTop / maxScrollTop;
      const frameIndex = Math.min(
        frameCount - 1,
        Math.ceil(scrollFraction * frameCount)
      );

      requestAnimationFrame(() => updateImage(frameIndex + 1));
    };

    window.addEventListener("scroll", handleScroll);

    preloadImages();

    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, []);

  return <canvas ref={canvasRef} id="robot-animation" />;
};

export default HeroAnimation;
